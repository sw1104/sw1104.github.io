---
title: "DATABASE"
excerpt: "DATABASE에 대해"

categories:
    - MySQL
tags:
    - [MySQL]

permalink: /mysql/database

toc: true
toc_sticky: true

date: 2022-08-06
last_modified_at: 2022-08-06
---

# DATABASE

### 학습목표

1. 데이터베이스
2. 관계형 데이터베이스
3. 테이블이 무엇이고 Column과 Row 설명
4. One to One, One to Many, Many to Many
5. Primary Key와 Foreign Key
6. 관계형 데이터베이스와 비관계형 데이터베이스

# 데이터베이스란

데이터베이스는 컴퓨터 시스템에 전자적으로 저장어 구조화된 정보 || 데이터의 구조화된 컬렉션을 나타낸다. 데이터베이스는 일반적으로 _데이터베이스 관리 시스템(DBMS : Database Management system)_ 에 의해 제어된다. 데이터와 데이터베이스 관리 시스템, 그리고 이와 연관된 다른 어플리케이션들을 통틀어서 `데이터베이스 시스템`으로 일컬으며, 데이터베이스라고 통칭되기도 한다. `DB`로 짧게 줄여 부르기도 한다.

#### 데이터베이스 사용하는 이유

> 데이터를 오랜기간 저장 및 보존하기 위해
> 데이터를 체계적으로 보존하고 관리하기 위해

> Database에는 크게 관계형 데이터베이스(RDBMS)와 "NoSQL"로 명칭되는 비관계형 데이터베이스가 있다.

# 관계형 데이터베이스

## 관계형 데이터베이스란

관계형 데이터베이스(RDBMS, Relational Database Management System)는 데이터 사이의 관계에 기초를 둔 시스템이다. 관계형 데이터베이스는 모든 데이터를 2차원 테이블(table)로 표현할 수 있다.

## 테이블

테이블은 관게형 데이터베이스에서 데이터를 행(row)과 열(column)으로 구성된 2차원 표이다.

    - 행(Row) : 행은 가로를 의미하며, 각 항목들의 실제 값이 들어간다.
    - 열(Column) : 열은 세로를 의미하며, 각 항목(ex : id, 제목, 저자, 생성 일자 등)을 의미한다.

> row는 각자 고유의 키(Primary Key)가 있다.

테이블의 가장 첫 컬럼은 언제나 `id`이다. 각 row는 고유한 번호를 가지고 있고 이를 고유 키(Primary key)라고 한다.

관계형 데이터베이스는 각각의 테이블들이 서로 `상호관련성`을 가지고 서로 연결되어 있다. 각각의 테이블들이 완전히 독립적인 대상이 아니라, 테이블A와 B가 서로 연관이 되어있고, 서로 관련이 있다는 뜻이다.

## 테이블 사이 관계의 종류

테이블끼리의 연결에는 3종류가 있다

-   one to one
-   one to many
-   many to many

#### one to one

테이블 A의 로우와 테이블 B의 로우가 정확히 일대일 매칭이 되는 관계

    	ex) 테이블 A : 한국 사람들의 이름 정보를 가지고 있는 테이블
    		테이블 B : 한국 사람들의 주민등록번호가 들어있는 테이블

table A :

| id  | Name     |
| --- | -------- |
| 1   | 김아무개 |
| 2   | 이아무개 |
| 3   | 박아무개 |
| 4   | 최아무개 |

table B :

| id  | Identification number | A_id |
| --- | --------------------- | ---- |
| 1   | 930101-1111111        | 3    |
| 2   | 940202-2222222        | 2    |
| 3   | 920404-3333333        | 1    |
| 4   | 930505-4444444        | 4    |

대한민국의 사람은 주민번호를 단 한개만 가질 수 있다. 이는 주민번호의 입장에서도 하나의 주민번호는 단 한명의 사용자만 있다.

이는 곧 하나의 A 데이터는 하나의 B데이터와 연결되는것을 의미한다.
즉, 테이블 A의 row하나는 테이블 B의 row하나와 연결된다. 반대의 경우도 같다.

이렇게 각각의 데이터들이 하나씩 연결된 경우 A와 B테이블 사이의 관계를 one to one 이라 한다.
그리고 테이블 B의 A_id는 해당 주민번호가 누구의 것인지 알려주기 위해 주인인 A 테이블의 id를 기록한것이다. 이를 참조한다고 한다. 참조를 하는 이유는 이미 user의 정보가 담긴 테이블 A가 있기 때문에 테이블 B에 사람의 이름을 넣어 중복되게 만들어서 불필요한 메모리를 사용하지 않기 위해서 참조하는 것이다.
다른 테이블의 id(pk)를 참조한 이걸 부르는 이름은 Foreign Key(외래키)이다. 따라서 테이블 B의 A_id는 FK이다.

#### one to many

테이블 A의 row가 테이블 B의 여러 row와 견결되는 관계를 말한다.
아래 예시를 보면 테이블 B에 A_id에는 테이블 A id가 다수 사용된걸 볼 수 있다.

table A :

| id  | name     |
| --- | -------- |
| 1   | 김아무개 |
| 2   | 이아무개 |
| 3   | 박아무개 |
| 4   | 최아무개 |

table B :

| id  | name   | age | user_id |
| --- | ------ | --- | ------- |
| 1   | 냥냥   | 3   | 1       |
| 2   | 멍멍   | 2   | 1       |
| 3   | 야옹   | 1   | 3       |
| 4   | 왈왈   | 1   | 3       |
| 5   | 엉엉   | 6   | 3       |
| 6   | 이야옹 | 12  | 2       |
| 7   | 크르르 | 8   | 4       |

#### many to many

테이블 A의 row가 테이블 B의 여러 row와 연결되고, 테이블 B의 row가 테이블 A의 여러 row와 연결되는 것을 말한다.

table Books :

| id  | authors          | title | price |
| --- | ---------------- | ----- | ----- |
| 1   | 김씨, 이씨       | A책   | 13000 |
| 2   | 김씨, 박씨       | B책   | 23000 |
| 3   | 이씨, 최씨, 박씨 | C책   | 16000 |

books 라는 테이블은 일반적으로 많이 사용하는 테이블처럼 보이지만 데이터베이스에는 이러한 형식으로는 저장할 수 없다. 하나의 row에는 하나의 데이터만 들어가야한다.(정규화 제 1법칙)

그럼 이 테이블의 작가를 풀어서 쓰면

| id  | authors | title | price |
| --- | ------- | ----- | ----- |
| 1   | 김씨    | A책   | 13000 |
| 2   | 이씨    | A책   | 13000 |
| 3   | 김씨    | B책   | 23000 |
| 4   | 박씨    | B책   | 23000 |
| 5   | 이씨    | C책   | 16000 |
| 6   | 최씨    | C책   | 16000 |
| 7   | 박씨    | C책   | 16000 |

이렇게 작성할 수 있다. 하지만 이는 또다른 문제점이 생긴다 먼저 가독성이 좋지 않으며, 책이 한권 추가될 때마다 작가가 여러명이면 작가의 수에 맞춰서 많은 데이터를 저장해주어야 하는 문제가 발생한다. 그래서 이 문제를 해결하기 위해서는 FK(Foreign Key)를 이용해주어야 한다. 데이터베이스에서 FK를 사용하는 가장 큰 이유 중 하나가 이러한 경우이다.

table authors :

| id  | name |
| --- | ---- |
| 1   | 김씨 |
| 2   | 이씨 |
| 3   | 박씨 |
| 4   | 최씨 |

tables author_books :

| id  | author_id | book_id |
| --- | --------- | ------- |
| 1   | 1         | 1       |
| 2   | 2         | 1       |
| 3   | 1         | 2       |
| 4   | 3         | 2       |
| 5   | 2         | 3       |
| 6   | 4         | 3       |
| 7   | 3         | 3       |

tables books :

| id  | title | price |
| --- | ----- | ----- |
| 1   | A책   | 13000 |
| 2   | B책   | 23000 |
| 3   | C책   | 16000 |

이렇게 두 테이블이 서로 각자 다른 테이블의 여러 데이터와 연결될 때는 두 테이블의 데이터를 조합하기 위해 중간 테이블이 하나 생성된다. 그리고 이러한 관계를 many to many라고 한다.

## 테이블과 테이블 연결 방법

-   Foreign Key(외부키)라는 개념을 사용하여 주로 연결한다.
-   앞에 oto 예시에서 A_id는 A테이블에 걸려있는 외부키이다.
-   만일 A 테이블에 없는 id값이 B 테이블에 지정되면 에러가 발생한다.

## 테이블 연결하는 이유

-   하나의 테이블에 모든 정보를 다 넣으면 동일한 정보가 불필요하게 중복된다.
-   많은 메모리를 사용하게 되고, 잘못된 데이터가 저장될 수 있다.
-   고객 정보를 저장시 이름이 같을 경우 저장할 수 없다.
-   중복 데이터를 저장하지 않아 디스크를 더 효율적으로 쓸 수 있다.
-   같은 데이터지만 부분적으로 내용이 다른 데이터가 생기는 문제가 없어진다.
-   이것을 `normalization(정규화)`이라고 한다.

# 비관계형 데이터베이스

비관계형 데이터베이스(N-RDBMS, Not Database Management System)는 NoSQL이라고도 불린다.(Not Only SQL : SQL뿐만 아니라)
기존의 관계형 데이터베이스의 한계를 뛰어넘기 위해 만들어진 새로운 형태의 데이터베이스로, 관계형 데이터베이스보다 더 융통성 있는 데이터 모델을 사용하여, 데이터의 저장 및 검색에 특화된 메커니즘을 제공한다. NoSQL은 분산 환경에서의 데이터 처리를 더욱 빠르게 하기 위해 개발되었다. 대표적으로 MongoDB, CouchDB 등이 있다.

#### 특징

-   거대한 Map으로서 key-value 형식을 지원함.
-   관계형 db와 달리 PK, FK, JOIN등 관계를 정의하지 않음.
-   스키마에 대한 정의가 없다

### 장점

-   대용량 데이터 처리에 효율적임
-   관계형보다 읽기, 쓰기 성능이 빠르며, 쓰기가 읽기보다 더 빠르다.
-   데이터 모델링이 유연하다.
-   뛰어난 확장성으로 검색에 유리
-   최적화된 키 값 저장 기법을 사용하여 응답속도나 처리효율 등에서 성능이 뛰어남.
-   복잡한 데이터 구조를 표현할 수 있다.

### 단점

-   쿼리 처리시 데이터를 파싱 후 연산을 해야해서 큰 크기의 document를 다룰 때는 성능이 저하된다.
-   데이터베이스의 데이터가 많아 컬렉션이 다양할 경우 수정할 때 많은 시간과 노동을 필요로 한다.

비관계형 데이터베이스에서는 테이블을 컬렉션, 레코드를 문서로 부른다. 단순 이름만 다른것은 아니고 차이가 있다.
관계형 데이터베이스에서는 스키마를 따르지 않으면 데이터를 추가할 수 없지만, 비관계형 데이터베이스에서는 다른 구조의 데이터라도 같은 컬렉션에 추가할 수 있다.(스키마 = 데이터베이스)

# 학습목표 풀이

1. 데이터베이스

> 데이터베이스는 방대한 양의 정보를 오랫동안 안전하게 보관하기 위해 만들어진 시스템이다.

2. 관계형 데이터베이스

> 관계형 데이터베이스란 태이블로 이루어져 있으며, 하나의 데이터베이스안에 여러 테이블이 서로 각각 연결이 되어있다.
> 관계형 데이터베이스를 사용하는 이유는 중복된 데이터를 저장할 필요없어서 디스크관리에 좋다. 중복된 값이 있는 데이터를 저장하기에 좋다.

3. 테이블이 무엇이고 Column과 Row 설명

> 테이블은 관계형 데이터베이스에서 row와 column으로 이루어진 2차원 표이다.
> column은 세로열로, 각 항목을 의미한다.
> row는 가로행으로, 각 항목에 입력된 실제값이다.

4. One to One, One to Many, Many to Many

> one to one은 두개의 테이블 A, B에서 A의 row와 B의 row가 각각 하나씩 연결되어 있는 것을 의미한다. 예로 한 사람은 하나의 주민번호를 갖는것처럼 말이다.

> one to many는 테이블 A가 가진 하나의 row가 테이블 B의 여러 row에서 이용되는것을 말한다. 예로 한 사람이 두마리 이상의 애완동물을 키울경우 애완동물 두 마리의 주인이 사람 한명을 가리키는것이다.

> many to many는 테이블 A의 row와 테이블 B의 row가 각각 여러개에 연결되는것을 말한다. 예로 책의 저자를 보면 여러명이 있는 경우가 있으며, 저자가 다른 책에도 들어가있을 경우 책마다, 저자마다 다수 대 다수로 연결된다.

5. Primary Key와 Foreign Key

> Primary Key : 유일한 값으로 중복된 값을 가질 수 없다.
> Foreign Key : 테이블 끼리의 연결을 담당한다.

6. 관계형 데이터베이스와 비관계형 데이터베이스

> 관계형 데이터베이스는 2차원 테이블로 구성 되어있으며, 각각의 테이블이 서로 관계를 맺고있다.
> 비관계형 데이터베이스는 관계를 맺지않고 데이터를 동일한 컬렉션에 저장한다.
