---
title: "가상화 운영방식"
excerpt: "도커를 알기전에 하이퍼바이저 가상화와 컨테이너 가상화에 대해서 먼저 알아보자."

categories:
  - Docker
tags:
  - [Docker]

permalink: /Docker/virtualization

toc: true
toc_sticky: true

date: 2022-09-13
last_modified_at: 2022-09-13
---
# 가상화 이전의 운영 방식
가상화 기술이 개발되지 전에는 하나의 컴퓨터에 하나의 OS만 사용하는 것이 주된 운영 방식이었다. 이런 방식으로 운영을 할 경우 해당 OS가 컴퓨터의 모든 리소스(CPU등)를 항상 풀로 사용하기 어렵기 때문에 리소스들이 idle 상태(유휴 상태)로 낭비될 수 있다. 그리고 서버 자원의 사용량을 예측하기 쉽지 않고 증감폭이 크기 때문에 물리적으로 서버를 계속해서 늘려나가는 것은 한계가 존재한다. 따라서 낭비되는 서버 자원을 조금 더 유연하게 사용하여 인프라 확장을 쉽게 하기 위해 `Hypervisor Virtualization`기술이 탄생하게 되었다.

# 하이퍼바이저 가상화 (Hypervisor virtualization)
하나의 컴퓨터에서 하나의 OS만 운영하는 방식에서 발생하는 비효율적인 상황을 해결하고자 하나의 컴퓨터에서 여러 OS를 동시에 실행하기 위한 소프트웨어로 하이퍼 바이저 가상화 기술이 탄생했다.

하이퍼바이저 가상화는 다음과 같이 이루어져 있다. 
- 하나의 물리적 서버 위에 존재하는 Host OS
- 그 위에 존재하는 독립적인 여러 OS

하나의 물리적 서버 위에 Host OS가 존재하며, 그 위에 독립적인 여러 OS가 가상(virtually)으로 돌아갈 수 있도록 하는 기술이다. 각각의 OS는 독립적이기에 서로에 대해 알지 못하며, Host OS 또한 다른 OS에 대해 알지 못한다. Host OS 위에서 실행되고 있지만 완전히 독립적으로 운영되기 때문이다. 이로인해 하나의 물리적 서버의 리소스를 각각의 OS에 할당하여 효율적으로 사용할 수 있게 된다.
대표적인 가상화 서비스로 VMware, VirtualBox가 있다.

# 컨테이너 가상화 (Container Virtualization)
하이퍼바이저 가상화는 사용법은 간단하지만 기술적으로 너무 무겁다는 단점이 있다. 각각의 독립적인 OS를 실행시켜야 하기 때문에 부팅 시간이 길며 리소스를 많이 차지할 수 밖에 없다. 그렇다보니 실제 운영 환경에서는 사용하기 어려운 점이 있다.

위의 상황을 해결하기위해 프로세스를 격리된 환경에서 실행하는 컨테이너 가상화 기술이 등장하게 되었다. 예로 리눅스에서는 이러한 방식을 리눅스 컨테이너라고 하며 OS를 가상화 하는 것이 아니라 운영체제 수준의 가상화 기술로 리눅스 커널을 공유하면서 프로세스를 격리된 환경에서 실행하기 때문에 하이퍼바이저 가상화 방식보다 훨씬 가볍고 빠르게 동작한다.

컨테이너 가상화 기술을 통해 하나의 서버에 다수의 컨테이너를 실행하면 컨테이너끼리 서로 영향을 끼치지 않고 독립적으로 실행된다. 실행중인 컨테이너에 접속하여 명령어 입력, 패키지 설치 등 다양한 작업을 할수 있다. 또한 리소스를 제한할 수 있으며 호스트 디렉토리에 마운트하여 내부 디렉토리로 사용할 수 있다. 새로운 컨테이너를 만드는 시간은 OS를 가상화 하는 방식과 비교도 할 수 없을 정도로 빠르다. 그리고 하나의 컨테이너를 실행하기 위해 필요한 모든 파일은 이미지로 만들어 놓고 제공하기 때문에 컨테이너 가상화 방식을 사용하면 개발 단계부터 테스트 및 프로덕션에 이르기까지 일관된 환경을 유지할 수 있다.